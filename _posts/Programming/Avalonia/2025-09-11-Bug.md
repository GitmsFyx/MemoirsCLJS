---
categories: Avalonia
---

# 遇见的问题或Bug

当在嵌套的数据控件中绑定最外层的`ViewModel`,需要使用`RelativeSource` 或 `ElementName` (我用的是这种)

``` Xaml
<Button Content="编辑" 
        Command="{Binding DataContext.EditArchiveCommand, 
        RelativeSource={RelativeSource AncestorType=UserControl}}"
```

但它始终无法推断其`DataContext`为`ArchiveViewModel`,即使在根控件中加入了`x:DataType="vm:ArchiveViewModel"` ,也没用,在后台隐藏cs中给`DataContext`赋值也没有用,
只能在Xaml下面显示赋值,它才能推断.
```
    <UserControl.DataContext>
        <vm:ArchiveViewModel></vm:ArchiveViewModel>
    </UserControl.DataContext>
```
