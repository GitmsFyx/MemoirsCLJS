---
categories: ASP.net
---

# ASP

## Base
``` CSharp
//自动传入context上下文,执行lambda代码,需要
app.Run(async context=>
{   
    //添加键值对,键不应包含空格
    context.Response.Headers["Mykey"] = "my value";

    //响应
    await context.Response.WriteAsync("Hello");
})); 
```

`context.Request.Method` 获得请求方法

`context.Request.Body` 获得请求体

`context.Request.Query.ContainsKey("id")` 查询语句中是否包含id.

`context.Request.Query["id"]`  查询语句中的id值

## 请求头

GET 会将查询字符串写在URL的?后面并且用&连接,而POST则是放在请求体中.

`Content-type` 请求体格式,POST中 `text/html`

`User-Agent` 浏览器类型

## 响应头


## 获取请求体
``` CSharp
//自动传入context上下文,执行lambda代码,需要
app.Run(async context=>
{   
    StreamReader reader = new StreamReader(context.Request.Body);
    //context.Request.Body 是一个Stream对象
    string body=await reader.ReadToEndAsync();

    //StringValues是特殊的值,可以包含多个值.因为在查询中有可能有多个选项
    //QueryHelpers是ASP内置的类
    Dictionary<string, StringValues> query = QueryHelpers.ParseQuery(body);
    if (query.ContainsKey("firstName"))
    {
        string firstName = query["firstName"][0];
    
        await context.Response.WriteAsync(firstName);
    }

})); 
```